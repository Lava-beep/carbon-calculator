<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EcoLeaf Analytics - Carbon Accounting & Sustainability</title>
  <style>
    /* Base styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #e7f1db 0%, #c8ddb6 60%, #a8c48a 100%);
      /* Add animated gradient */
      animation: gradientBG 12s ease-in-out infinite alternate;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated gradient keyframes */
    @keyframes gradientBG {
      0% {
        background-position: 0% 50%;
        background: linear-gradient(135deg, #e7f1db 0%, #c8ddb6 60%, #a8c48a 100%);
      }

      50% {
        background-position: 100% 50%;
        background: linear-gradient(120deg, #d2f1e7 0%, #b6ddc8 60%, #8ac4a8 100%);
      }

      100% {
        background-position: 0% 50%;
        background: linear-gradient(135deg, #e7f1db 0%, #c8ddb6 60%, #a8c48a 100%);
      }
    }

    /* Container with translucent background */
    .container {
      max-width: 960px;
      margin: 2.5rem auto 4rem;
      padding: 2rem 2.5rem;
      background-color: rgba(255 255 255 / 0.85);
      border-radius: 16px;
      box-shadow: 0 10px 40px rgb(28 54 25 / 0.15);
    }

    /* Header styles */
    header {
      text-align: center;
      margin-bottom: 4rem;
    }

    header h1 {
      font-size: 3.2rem;
      margin-bottom: 0.3rem;
      color: #1c470f;
      text-shadow: 1px 1px 4px rgb(145 163 117 / 0.55);
      font-weight: 800;
    }

    header p {
      font-size: 1.25rem;
      color: #4c7033;
      font-style: italic;
      font-weight: 600;
      text-shadow: 0 0 2px rgb(155 176 132 / 0.45);
      margin: 0;
    }

    /* Callout with button */
    .callout {
      background-color: #ddefc9;
      border-radius: 14px;
      padding: 1.1rem 2.5rem;
      font-weight: 700;
      font-size: 1.3rem;
      color: #3f6821;
      text-align: center;
      margin-bottom: 4em;
      box-shadow: 2px 5px 16px rgb(43 82 18 / 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.2rem;
      flex-wrap: wrap;
    }

    .callout button {
      background-color: #558a2f;
      color: #f1f7e7;
      padding: 0.55rem 1.6rem;
      font-weight: 700;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgb(44 79 20 / 0.6);
      transition: background-color 0.25s ease, box-shadow 0.25s ease;
    }

    .callout button:hover,
    .callout button:focus {
      background-color: #3e6d1f;
      box-shadow: 0 0 12px rgb(36 65 18 / 0.9);
      outline: none;
    }

    /* Sections */
    section {
      margin-bottom: 3rem;
      background: #f9fff4;
      padding: 2rem 2.5rem;
      border-radius: 18px;
      box-shadow: 0 6px 28px rgb(30 54 22 / 0.1);
      transition: box-shadow 0.3s ease;
    }

    section:hover,
    section:focus-within {
      box-shadow: 0 10px 38px rgb(30 54 22 / 0.22);
    }

    section h2 {
      margin-top: 0;
      margin-bottom: 1.2rem;
      font-size: 2.1rem;
      color: #275210;
      font-weight: 900;
      border-bottom: 4px solid #8eb145;
      padding-bottom: 0.5rem;
      letter-spacing: 0.03em;
      text-shadow: 0 0 3px rgb(85 129 14 / 0.25);
    }

    section p,
    section ul {
      font-size: 1.18rem;
      color: #40682a;
      font-weight: 600;
      text-shadow: 0 0 1px rgb(146 166 117 / 0.15);
    }

    section ul {
      margin-left: 1.8rem;
    }

    section ul li {
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    /* Leadership */
    .leadership {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 2.3rem;
      justify-items: center;
    }

    .leader-card {
      background-color: #d9f0b5;
      border-radius: 16px;
      padding: 1.8rem 2.2rem;
      font-size: 1.25rem;
      font-weight: 700;
      color: #2e5725;
      box-shadow: 3px 7px 18px rgb(54 114 31 / 0.22);
      text-align: center;
      transition: background-color 0.35s ease, transform 0.35s ease;
      cursor: default;
      user-select: none;
    }

    .leader-card:hover,
    .leader-card:focus {
      background-color: #c3da8f;
      transform: scale(1.06);
      outline: none;
    }

    /* Footer */
    footer {
      font-style: italic;
      color: #627a3b;
      text-align: center;
      border-top: 1px solid #97b35a;
      padding: 1.6rem 0;
      font-size: 1rem;
      letter-spacing: 0.035rem;
    }

    /* Responsive */
    @media (max-width: 600px) {
      header h1 {
        font-size: 2.4rem;
      }

      section h2 {
        font-size: 1.85rem;
      }

      .container {
        padding-left: 1.2rem;
        padding-right: 1.2rem;
      }

      section,
      .leadership {
        padding: 1.2rem 1.2rem;
      }

      .leader-card {
        font-size: 1.1rem;
      }
    }

    /* Modal styling for dashboard */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 999;
      overflow-y: auto;
      padding: 1rem;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: #fff;
      border-radius: 12px;
      max-width: 700px;
      width: 100%;
      padding: 2rem 2.5rem;
      box-shadow: 0 8px 32px rgba(28, 54, 25, 0.2);
      position: relative;
      max-height: 90vh;
      overflow-y: auto;
      user-select: text;
      animation: fadeInScale 0.3s ease forwards;
    }

    @keyframes fadeInScale {
      0% {
        opacity: 0;
        transform: scale(0.9);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .modal h3 {
      margin-top: 0;
      margin-bottom: 1.2rem;
      font-size: 1.8rem;
      font-weight: 700;
      color: #2a582a;
      border-bottom: 2px solid #6aa44d;
      padding-bottom: 0.30rem;
    }

    .modal label {
      display: block;
      margin-bottom: 0.7rem;
      font-weight: 600;
      font-size: 1.05rem;
      margin-top: 1rem;
      color: #2d562d;
    }

    .modal input[type="number"] {
      width: 100%;
      max-width: 180px;
      border-radius: 6px;
      border: 1px solid #9ccc65;
      padding: 0.5rem 0.75rem;
      font-size: 1rem;
      margin-top: 0.3rem;
      color: #225522;
      transition: border-color 0.3s ease;
    }

    .modal input[type="number"]:focus {
      border-color: #6ca814;
      outline: none;
      box-shadow: 0 0 4px 2px #a5d14f8a;
    }

    .modal .calculation-history {
      margin-top: 2rem;
      font-weight: 600;
      font-size: 1.2rem;
      border-top: 2px solid #b7d48a;
      padding-top: 1rem;
      color: #3a663a;
      min-height: 3rem;
      max-height: 9rem;
      overflow-y: auto;
      background: #f5fbe9;
      border-radius: 6px;
      padding: 0.5rem 1rem;
    }

    .modal .footprint {
      font-size: 2.4rem;
      font-weight: 700;
      color: #275213;
      margin: 1.5rem 0 0.5rem;
      text-align: center;
      user-select: all;
    }

    .modal .footprint strong {
      color: #1d3d11;
    }

    .modal p.scope {
      font-size: 1.1rem;
      padding-left: 0.6rem;
    }

    /* Close button */
    .modal-close {
      position: absolute;
      top: 0.8rem;
      right: 0.8rem;
      background: transparent;
      border: none;
      font-size: 1.8rem;
      font-weight: 700;
      cursor: pointer;
      color: #3e6b23;
      transition: color 0.3s ease;
      user-select: none;
    }

    .modal-close:hover,
    .modal-close:focus {
      color: #1d3b0d;
      outline: none;
    }

    /* Calculate button */
    .modal button.calculate-btn {
      margin-top: 2rem;
      background-color: #6aa44d;
      color: white;
      padding: 0.75rem 2rem;
      font-size: 1.15rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
      font-weight: 600;
      user-select: none;
    }

    .modal button.calculate-btn:hover,
    .modal button.calculate-btn:focus {
      background-color: #4f7f34;
      outline: none;
    }

    /* User Auth Modal */
    .modal-overlay#authModal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      padding: 1rem;
    }

    .modal#authModal {
      max-width: 400px;
      width: 100%;
      padding: 2rem;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(28, 54, 25, 0.2);
      position: relative;
      animation: fadeIn 0.3s ease forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal#authModal h3 {
      margin-top: 0;
      margin-bottom: 1.2rem;
      font-size: 1.8rem;
      font-weight: 700;
      color: #2a582a;
      border-bottom: 2px solid #6aa44d;
      padding-bottom: 0.3rem;
    }

    .modal#authModal label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      font-size: 1rem;
      color: #2d562d;
    }

    .modal#authModal input[type="text"] {
      width: 100%;
      border-radius: 6px;
      border: 1px solid #9ccc65;
      padding: 0.5rem 0.75rem;
      font-size: 1rem;
      margin-top: 0.3rem;
      color: #225522;
      transition: border-color 0.3s ease;
    }

    .modal#authModal input[type="text"]:focus {
      border-color: #6ca814;
      outline: none;
      box-shadow: 0 0 4px 2px #a5d14f8a;
    }

    /* Responsive modal */
    @media (max-width: 480px) {
      .modal {
        padding: 1.5rem 1.8rem;
        max-width: 95vw;
      }

      .modal#authModal {
        padding: 1.5rem 1.8rem;
        max-width: 95vw;
      }
    }

    /* Chatbot widget */
    #chatbotWidget {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 320px;
      max-width: 90vw;
      background: #f9fff4;
      border-radius: 14px 14px 0 14px;
      box-shadow: 0 8px 32px rgba(28, 54, 25, 0.18);
      z-index: 1001;
      font-size: 1rem;
      display: none;
      flex-direction: column;
      overflow: hidden;
    }

    #chatbotHeader {
      background: #8eb145;
      color: #fff;
      padding: 0.7rem 1.2rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #chatbotBody {
      padding: 1rem;
      height: 180px;
      overflow-y: auto;
      background: #f5fbe9;
    }

    #chatbotQuickReplies {
      display: flex;
      gap: 0.5em;
      flex-wrap: wrap;
      padding: 0.5em 1em 0.5em 1em;
    }

    #chatbotInputArea {
      display: flex;
      border-top: 1px solid #c3da8f;
      background: #f9fff4;
    }

    #chatbotInput {
      flex: 1;
      border: none;
      padding: 0.7rem;
      font-size: 1rem;
      border-radius: 0 0 0 14px;
      outline: none;
      background: #f9fff4;
    }

    #chatbotSend {
      background: #6aa44d;
      color: #fff;
      border: none;
      padding: 0 1.2rem;
      font-size: 1.1rem;
      cursor: pointer;
      border-radius: 0 0 14px 0;
      transition: background 0.2s;
    }

    #chatbotSend:hover {
      background: #4f7f34;
    }

    #openChatbot {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #6aa44d;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      font-size: 2rem;
      box-shadow: 0 4px 16px rgba(28, 54, 25, 0.18);
      cursor: pointer;
      z-index: 1002;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    #openChatbot:hover {
      background: #4f7f34;
    }

    /* Dark mode */
    body.dark-mode {
      background: linear-gradient(135deg, #232e1c 0%, #2a3c1e 60%, #1a2a0e 100%);
      color: #e7f1db;
    }

    body.dark-mode .container,
    body.dark-mode section,
    body.dark-mode .modal,
    body.dark-mode #chatbotWidget {
      background-color: #232e1c !important;
      color: #e7f1db !important;
    }

    body.dark-mode .callout,
    body.dark-mode .leader-card {
      background-color: #2a3c1e !important;
      color: #e7f1db !important;
    }

    body.dark-mode .modal input,
    body.dark-mode .modal label {
      background: #232e1c !important;
      color: #e7f1db !important;
    }

    body.dark-mode .modal input {
      border-color: #8eb145;
    }

    body.dark-mode #chatbotBody {
      background: #232e1c !important;
      color: #e7f1db !important;
    }

    body.dark-mode #chatbotHeader {
      background: #4f7f34 !important;
      color: #fff !important;
    }

    /* Animated SVG leaves overlay */
    .bg-leaves {
      pointer-events: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
      overflow: visible;
    }

    .leaf {
      opacity: 0.18;
      position: absolute;
      will-change: transform;
      animation: floatLeaf 14s linear infinite;
    }

    .leaf2 {
      left: 20vw;
      top: 10vh;
      animation-delay: 2s;
    }

    .leaf3 {
      left: 60vw;
      top: 30vh;
      animation-delay: 5s;
    }

    .leaf4 {
      left: 80vw;
      top: 60vh;
      animation-delay: 8s;
    }

    .leaf5 {
      left: 10vw;
      top: 70vh;
      animation-delay: 11s;
    }

    @keyframes floatLeaf {
      0% {
        transform: translateY(0) rotate(0deg) scale(1);
      }

      50% {
        transform: translateY(30px) rotate(10deg) scale(1.1);
      }

      100% {
        transform: translateY(0) rotate(-5deg) scale(1);
      }
    }

    /* Header (inspired by greenly.earth) */
    #mainHeader {
      width: 100%;
      background: rgba(255, 255, 255, 0.98);
      box-shadow: 0 2px 12px rgba(44, 79, 20, 0.09);
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1005;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 2.5em;
      height: 72px;
    }

    #mainHeader img {
      height: 38px;
      width: 38px;
      margin-right: 0.5em;
    }

    #mainHeader .nav-link {
      color: #275210;
      font-weight: 700;
      text-decoration: none;
      font-size: 1.1em;
    }

    #mainHeader #darkModeToggle {
      background: #6aa44d;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 38px;
      height: 38px;
      font-size: 1.2rem;
      box-shadow: 0 2px 8px rgba(44, 79, 20, 0.2);
      cursor: pointer;
    }

    #mainHeader #langSelect {
      padding: 0.3em 1em;
      border-radius: 8px;
      border: 1px solid #8eb145;
    }

    /* Spacer for fixed header */
    .header-spacer {
      height: 72px;
    }
  </style>
</head>

<body>
  <!-- Animated SVG Leaves Overlay -->
  <svg class="bg-leaves" width="100vw" height="100vh" style="position:fixed;top:0;left:0;z-index:0;pointer-events:none;">
    <g class="leaf leaf2">
      <path d="M30 60 Q50 10 70 60 Q50 40 30 60" fill="#8eb145"/>
    </g>
    <g class="leaf leaf3">
      <path d="M60 120 Q90 60 120 120 Q90 100 60 120" fill="#6aa44d"/>
    </g>
    <g class="leaf leaf4">
      <path d="M100 40 Q120 10 140 40 Q120 30 100 40" fill="#c3da8f"/>
    </g>
    <g class="leaf leaf5">
      <path d="M20 180 Q40 140 60 180 Q40 170 20 180" fill="#b6ddc8"/>
    </g>
  </svg>

  <!-- User Auth Modal -->
  <div class="modal-overlay" id="authModal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="User Login/Register">
    <div class="modal" role="document">
      <button class="modal-close" aria-label="Close Auth" id="closeAuthModal">&times;</button>
      <h3>Sign In / Register</h3>
      <label for="username">Username</label>
      <input type="text" id="username" name="username" placeholder="Enter username" autocomplete="username" />
      <button class="calculate-btn" id="loginBtn">Continue</button>
      <p id="authStatus" style="color:#b00;font-size:1rem;"></p>
    </div>
  </div>

  <!-- EcoLeaf Header (inspired by greenly.earth) -->
  <header id="mainHeader" style="width:100%;background:rgba(255,255,255,0.98);box-shadow:0 2px 12px rgba(44,79,20,0.09);position:fixed;top:0;left:0;z-index:1005;display:flex;align-items:center;justify-content:space-between;padding:0 2.5em;height:72px;">
    <div style="display:flex;align-items:center;gap:1em;">
      <img src="https://img.icons8.com/ios-filled/50/8eb145/leaf.png" alt="EcoLeaf Logo" style="height:38px;width:38px;margin-right:0.5em;">
      <span style="font-size:2rem;font-weight:800;color:#275210;letter-spacing:0.02em;">EcoLeaf Analytics</span>
    </div>
    <nav style="display:flex;align-items:center;gap:2em;">
      <a href="#" class="nav-link" data-section="home" style="color:#275210;font-weight:700;text-decoration:none;font-size:1.1em;">Home</a>
      <a href="#" class="nav-link" data-section="dashboard" style="color:#275210;font-weight:700;text-decoration:none;font-size:1.1em;">Dashboard</a>
      <a href="#" class="nav-link" data-section="blog" style="color:#275210;font-weight:700;text-decoration:none;font-size:1.1em;">Blog</a>
      <a href="#" class="nav-link" data-section="contact" style="color:#275210;font-weight:700;text-decoration:none;font-size:1.1em;">Contact Us</a>
      <a href="#" class="nav-link" data-section="privacy" style="color:#275210;font-weight:700;text-decoration:none;font-size:1.1em;">Privacy Policy</a>
    </nav>
    <div style="display:flex;align-items:center;gap:0.7em;">
      <button id="darkModeToggle" aria-label="Toggle dark mode" style="background:#6aa44d;color:#fff;border:none;border-radius:50%;width:38px;height:38px;font-size:1.2rem;box-shadow:0 2px 8px rgba(44,79,20,0.2);cursor:pointer;">ðŸŒ™</button>
      <select id="langSelect" style="padding:0.3em 1em;border-radius:8px;border:1px solid #8eb145;">
        <option value="en">English</option>
        <option value="fr">FranÃ§ais</option>
      </select>
    </div>
  </header>

  <!-- Spacer for fixed header -->
  <div style="height:72px;"></div>

  <div class="container">
    <header>
      <h1>EcoLeaf Analytics</h1>
      <p id="welcomeUser">Provides cutting-edge solutions for comprehensive carbon accounting and sustainability management.</p>
    </header>

    <div class="callout">
      Leverage our AI-powered insights to reduce your environmental footprint and achieve your net-zero goals.
      <button id="exploreBtn" aria-expanded="false" aria-controls="dashboardModal" aria-label="Open Dashboard">
        Explore Dashboard
      </button>
    </div>

    <section>
      <h2>Track Emissions</h2>
      <ul>
        <li>Track Scope 1, 2, and 3 emissions with unparalleled accuracy, ensuring compliance and clear reporting.</li>
        <li>Utilize advanced AI and machine learning models to identify emission hotspots and forecast future trends.</li>
        <li>Visualize your sustainability data through intuitive, customizable dashboards tailored to your business needs.</li>
        <li>Monitor supplier sustainability and optimize your supply chain for reduced environmental impact.</li>
      </ul>
    </section>

    <section>
      <h2>Our Commitment</h2>
      <p>At EcoLeaf Analytics, we believe that sustainable business is good business. With over 25 years of combined
        experience in environmental science and data analytics, our team is dedicated to providing innovative
        solutions that empower organizations to make informed, eco-conscious decisions. We are passionate about helping
        businesses not just meet, but exceed their sustainability targets.</p>
    </section>

    <section>
      <h2>Leadership Team</h2>
      <div class="leadership">
        <div class="leader-card" tabindex="0" aria-label="CEO & Founder">CEO &amp; Founder</div>
        <div class="leader-card" tabindex="0" aria-label="CTO">CTO</div>
        <div class="leader-card" tabindex="0" aria-label="Chief Sustainability Officer">Chief Sustainability Officer</div>
      </div>
    </section>
  </div>

  <!-- Modal Dashboard -->
  <div class="modal-overlay" id="dashboardModal" aria-hidden="true" role="dialog" aria-modal="true"
    aria-label="Carbon Emissions Dashboard">
    <div class="modal" role="document">
      <button class="modal-close" aria-label="Close Dashboard" id="closeModal">&times;</button>
      <h3>Direct Emissions from Company Operations</h3>
      <label for="kwh-direct">kWh</label>
      <input type="number" id="kwh-direct" name="kwh-direct" placeholder="Enter kWh" min="0" />
      <label for="liters-direct">Liters</label>
      <input type="number" id="liters-direct" name="liters-direct" placeholder="Enter liters" min="0" />
      <label for="kg-co2e-direct">kg CO2e</label>
      <input type="number" id="kg-co2e-direct" name="kg-co2e-direct" placeholder="Enter kg CO2e" min="0" />

      <h3>Energy Indirect Emissions</h3>
      <label for="kwh-indirect1">kWh</label>
      <input type="number" id="kwh-indirect1" name="kwh-indirect1" placeholder="Enter kWh" min="0" />
      <label for="kwh-indirect2">kWh</label>
      <input type="number" id="kwh-indirect2" name="kwh-indirect2" placeholder="Enter kWh" min="0" />
      <label for="kwh-indirect3">kWh</label>
      <input type="number" id="kwh-indirect3" name="kwh-indirect3" placeholder="Enter kWh" min="0" />

      <h3>Other Indirect Emissions</h3>
      <label for="km-other">km</label>
      <input type="number" id="km-other" name="km-other" placeholder="Enter distance (km)" min="0" />
      <label for="employee-km">employee-km/year</label>
      <input type="number" id="employee-km" name="employee-km" placeholder="Enter employee km/year" min="0" />
      <label for="tonnes-other">tonnes</label>
      <input type="number" id="tonnes-other" name="tonnes-other" placeholder="Enter tonnes" min="0" />
      <label for="tonnes-co2e-other">tonnes CO2e</label>
      <input type="number" id="tonnes-co2e-other" name="tonnes-co2e-other" placeholder="Enter tonnes CO2e" min="0" />

      <div class="calculation-history" aria-live="polite">
        <h3>ðŸ“Š Calculation History</h3>
        <p id="calcHistory">No calculations saved yet. Complete a calculation to see your history here.</p>
      </div>

      <h3>Your Carbon Footprint</h3>
      <canvas id="emissionChart" width="400" height="180" style="display:block;margin:0 auto 1.5rem;"></canvas>
      <p class="footprint" id="totalFootprint"><strong>0</strong> tonnes CO<sub>2</sub>e per year</p>
      <p class="scope" id="scope1Text">Scope 1: <strong id="scope1Footprint">0</strong> tonnes CO<sub>2</sub>e</p>
      <p class="scope" id="scope2Text">Scope 2: <strong id="scope2Footprint">0</strong> tonnes CO<sub>2</sub>e</p>
      <p class="scope" id="scope3Text">Scope 3: <strong id="scope3Footprint">0</strong> tonnes CO<sub>2</sub>e</p>

      <h3>Set Your Emission Reduction Goal</h3>
      <label for="goalInput">Annual Target (tonnes CO2e)</label>
      <input type="number" id="goalInput" min="0" placeholder="e.g. 100" />
      <div id="goalProgress" style="margin:1rem 0 2rem;">
        <div style="background:#c3da8f;border-radius:8px;height:18px;width:100%;overflow:hidden;">
          <div id="goalBar" style="background:#6aa44d;height:18px;width:0%;transition:width 0.5s;"></div>
        </div>
        <span id="goalStatus" style="font-size:1rem;font-weight:600;"></span>
      </div>

      <label for="csvImport" style="margin-top:2rem;">Import Data (CSV)</label>
      <input type="file" id="csvImport" accept=".csv" />

      <button class="calculate-btn" id="calculateBtn">Calculate Carbon Footprint</button>
    </div>
  </div>

  <!-- Chatbot Widget -->
  <button id="openChatbot" aria-label="Open Chatbot">ðŸ’¬</button>
  <div id="chatbotWidget" aria-label="AI Assistant" role="dialog" aria-modal="true" tabindex="-1">
    <div id="chatbotHeader">
      EcoLeaf AI Assistant
      <button style="background:none;border:none;color:#fff;font-size:1.3rem;cursor:pointer;" id="closeChatbot" aria-label="Close Chatbot">&times;</button>
    </div>
    <div id="chatbotBody"></div>
    <div id="chatbotQuickReplies" style="display:flex;gap:0.5em;flex-wrap:wrap;padding:0.5em 1em 0.5em 1em;"></div>
    <div id="chatbotInputArea">
      <input type="text" id="chatbotInput" placeholder="Ask about your emissions..." autocomplete="off" aria-label="Chatbot input" />
      <button id="chatbotSend" aria-label="Send">âž¤</button>
    </div>
  </div>

  <!-- Blog Section (replace the old #section-blog) -->
  <div id="section-blog" class="main-section" style="display:none;margin-top:80px;">
    <div class="container">
      <header>
        <h1>EcoLeaf Blog</h1>
        <p>Insights, news, and tips on sustainability and carbon management.</p>
      </header>
      <section>
        <div style="display: flex; flex-wrap: wrap; gap: 2.5rem; justify-content: center;">
          <!-- Blog Card 1 -->
          <article style="background:#f9fff4;border-radius:16px;box-shadow:0 6px 28px rgb(30 54 22 / 0.10);padding:1.5rem 1.5rem 1rem 1.5rem;max-width:340px;flex:1 1 320px;display:flex;flex-direction:column;">
            <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80" alt="AI Carbon Accounting" style="width:100%;border-radius:12px 12px 0 0;object-fit:cover;max-height:160px;">
            <h2 style="font-size:1.3rem;margin:1rem 0 0.5rem 0;color:#275210;">How AI is Transforming Carbon Accounting</h2>
            <div style="color:#627a3b;font-size:0.95em;margin-bottom:0.7em;">April 2025</div>
            <p style="flex:1;">Discover how artificial intelligence is revolutionizing the way organizations track, analyze, and reduce their carbon emissions for a greener future.</p>
            <a href="#" class="blog-readmore" style="color:#6aa44d;font-weight:700;text-decoration:underline;margin-top:0.5em;" onclick="showBlogModal(0);return false;">Read more</a>
          </article>
          <!-- Blog Card 2 -->
          <article style="background:#f9fff4;border-radius:16px;box-shadow:0 6px 28px rgb(30 54 22 / 0.10);padding:1.5rem 1.5rem 1rem 1.5rem;max-width:340px;flex:1 1 320px;display:flex;flex-direction:column;">
            <img src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=600&q=80" alt="Reduce Emissions" style="width:100%;border-radius:12px 12px 0 0;object-fit:cover;max-height:160px;">
            <h2 style="font-size:1.3rem;margin:1rem 0 0.5rem 0;color:#275210;">Top 5 Ways to Reduce Your Business Emissions</h2>
            <div style="color:#627a3b;font-size:0.95em;margin-bottom:0.7em;">March 2025</div>
            <p style="flex:1;">Practical strategies and actionable tips for companies to cut their carbon footprint and lead the way in sustainability.</p>
            <a href="#" class="blog-readmore" style="color:#6aa44d;font-weight:700;text-decoration:underline;margin-top:0.5em;" onclick="showBlogModal(1);return false;">Read more</a>
          </article>
          <!-- Blog Card 3 -->
          <article style="background:#f9fff4;border-radius:16px;box-shadow:0 6px 28px rgb(30 54 22 / 0.10);padding:1.5rem 1.5rem 1rem 1.5rem;max-width:340px;flex:1 1 320px;display:flex;flex-direction:column;">
            <img src="https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=600&q=80" alt="Scope Emissions" style="width:100%;border-radius:12px 12px 0 0;object-fit:cover;max-height:160px;">
            <h2 style="font-size:1.3rem;margin:1rem 0 0.5rem 0;color:#275210;">Understanding Scope 1, 2, and 3 Emissions</h2>
            <div style="color:#627a3b;font-size:0.95em;margin-bottom:0.7em;">February 2025</div>
            <p style="flex:1;">A clear guide to the different types of emissions, why they matter, and how your business can address each scope.</p>
            <a href="#" class="blog-readmore" style="color:#6aa44d;font-weight:700;text-decoration:underline;margin-top:0.5em;" onclick="showBlogModal(2);return false;">Read more</a>
          </article>
        </div>
      </section>
    </div>
  </div>

  <!-- Blog Modal (for reading full blog posts) -->
  <div id="blogModal" class="modal-overlay" style="z-index:2000;display:none;" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document" style="max-width:600px;">
      <button class="modal-close" aria-label="Close Blog" id="closeBlogModal" style="top:1rem;right:1rem;">&times;</button>
      <div id="blogModalContent"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // User Auth logic
    const authModal = document.getElementById('authModal');
    const closeAuthModal = document.getElementById('closeAuthModal');
    const loginBtn = document.getElementById('loginBtn');
    const usernameInput = document.getElementById('username');
    const welcomeUser = document.getElementById('welcomeUser');
    let currentUser = null;

    function showAuthModal() {
      authModal.classList.add('active');
      authModal.setAttribute('aria-hidden', 'false');
      usernameInput.value = '';
      usernameInput.focus();
      document.body.style.overflow = 'hidden';
    }
    function hideAuthModal() {
      authModal.classList.remove('active');
      authModal.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    }
    function setUser(name) {
      currentUser = name;
      localStorage.setItem('ecoUser', name);
      welcomeUser.innerHTML = `Welcome, <strong>${name}</strong>! Provides cutting-edge solutions for comprehensive carbon accounting and sustainability management.`;
    }
    function checkUser() {
      const user = localStorage.getItem('ecoUser');
      if (!user) {
        showAuthModal();
      } else {
        setUser(user);
      }
    }
    loginBtn.addEventListener('click', () => {
      const name = usernameInput.value.trim();
      if (name.length < 2) {
        document.getElementById('authStatus').textContent = "Please enter a valid username.";
        return;
      }
      setUser(name);
      hideAuthModal();
    });
    closeAuthModal.addEventListener('click', hideAuthModal);
    window.addEventListener('DOMContentLoaded', checkUser);

    // Dashboard Modal logic
    const exploreBtn = document.getElementById('exploreBtn');
    const dashboardModal = document.getElementById('dashboardModal');
    const closeModalBtn = document.getElementById('closeModal');
    const calculateBtn = document.getElementById('calculateBtn');

    exploreBtn.addEventListener('click', () => {
      dashboardModal.classList.add('active');
      dashboardModal.setAttribute('aria-hidden', 'false');
      // Focus first input
      const firstInput = dashboardModal.querySelector('input');
      if (firstInput) firstInput.focus();
      document.body.style.overflow = 'hidden'; // prevent body scroll
      loadCalculationHistory();
      loadGoal();
      updateGoalProgress();
    });

    closeModalBtn.addEventListener('click', () => {
      dashboardModal.classList.remove('active');
      dashboardModal.setAttribute('aria-hidden', 'true');
      exploreBtn.focus();
      document.body.style.overflow = '';
    });

    dashboardModal.addEventListener('click', (e) => {
      if (e.target === dashboardModal) {
        closeModalBtn.click();
      }
    });
    window.addEventListener('keydown', (e) => {
      if (e.key === "Escape" && dashboardModal.classList.contains('active')) {
        closeModalBtn.click();
      }
    });

    // Calculation logic
    function getUserHistoryKey() {
      return currentUser ? `calcHistory_${currentUser}` : 'calcHistory';
    }

    let emissionChart = null;
    function updateChart(scope1, scope2, scope3) {
      const ctx = document.getElementById('emissionChart').getContext('2d');
      if (emissionChart) emissionChart.destroy();
      emissionChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Scope 1', 'Scope 2', 'Scope 3'],
          datasets: [{
            data: [scope1, scope2, scope3],
            backgroundColor: ['#8eb145', '#6aa44d', '#c3da8f'],
            borderWidth: 1
          }]
        },
        options: {
          plugins: {
            legend: { display: true, position: 'bottom' }
          }
        }
      });
    }

    calculateBtn.addEventListener('click', () => {
      function val(id) {
        const v = document.getElementById(id)?.value;
        return v && !isNaN(v) && Number(v) >= 0 ? parseFloat(v) : 0;
      }
      let scope1 = val('kwh-direct') + val('liters-direct') + val('kg-co2e-direct');
      let scope2 = val('kwh-indirect1') + val('kwh-indirect2') + val('kwh-indirect3');
      let scope3 = val('km-other') + val('employee-km') + val('tonnes-other') + val('tonnes-co2e-other');
      let total = (scope1 * 0.9) + (scope2 * 0.7) + (scope3 * 0.5);

      scope1 = Math.round(scope1 * 100) / 100;
      scope2 = Math.round(scope2 * 100) / 100;
      scope3 = Math.round(scope3 * 100) / 100;
      total = Math.round(total * 100) / 100;

      document.getElementById('scope1Footprint').textContent = scope1;
      document.getElementById('scope2Footprint').textContent = scope2;
      document.getElementById('scope3Footprint').textContent = scope3;
      document.getElementById('totalFootprint').innerHTML = `<strong>${total}</strong> tonnes CO<sub>2</sub>e per year`;

      // Save calculation history per user
      let history = JSON.parse(localStorage.getItem(getUserHistoryKey()) || '[]');
      const timestamp = new Date().toLocaleString();
      const entry = `${timestamp}: Scope1=${scope1}, Scope2=${scope2}, Scope3=${scope3}, Total=${total}`;
      history.unshift(entry);
      if (history.length > 5) history.pop();
      localStorage.setItem(getUserHistoryKey(), JSON.stringify(history));
      renderCalculationHistory(history);

      updateChart(scope1, scope2, scope3);
      updateGoalProgress();
    });

    function renderCalculationHistory(history) {
      if (!history || history.length === 0) {
        document.getElementById('calcHistory').textContent = 'No calculations saved yet. Complete a calculation to see your history here.';
        return;
      }
      document.getElementById('calcHistory').innerHTML = history.map(item => `<div>${item}</div>`).join('');
    }

    function loadCalculationHistory() {
      const history = JSON.parse(localStorage.getItem(getUserHistoryKey()) || '[]');
      renderCalculationHistory(history);
    }

    // Goal logic
    const goalInput = document.getElementById('goalInput');
    const goalBar = document.getElementById('goalBar');
    const goalStatus = document.getElementById('goalStatus');
    function getGoalKey() {
      return currentUser ? `goal_${currentUser}` : 'goal';
    }
    function loadGoal() {
      const g = localStorage.getItem(getGoalKey());
      if (g) goalInput.value = g;
    }
    goalInput.addEventListener('change', () => {
      localStorage.setItem(getGoalKey(), goalInput.value);
      updateGoalProgress();
    });
    function updateGoalProgress() {
      const goal = parseFloat(goalInput.value);
      const totalText = document.getElementById('totalFootprint').textContent;
      const total = parseFloat(totalText) || 0;
      if (!goal || goal <= 0) {
        goalBar.style.width = '0%';
        goalStatus.textContent = '';
        return;
      }
      const percent = Math.min(100, Math.round((goal - total) / goal * 100));
      goalBar.style.width = `${100 - percent}%`;
      goalStatus.textContent = total <= goal
        ? `ðŸŽ‰ Goal met! Emissions at ${total} / ${goal} tonnes`
        : `Progress: ${total} / ${goal} tonnes COâ‚‚e`;
    }

    // CSV import logic (demo: expects headers matching input IDs)
    document.getElementById('csvImport').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (evt) {
        const lines = evt.target.result.split('\n');
        const headers = lines[0].split(',');
        const values = lines[1]?.split(',');
        if (!values) return;
        headers.forEach((h, i) => {
          const el = document.getElementById(h.trim());
          if (el) el.value = values[i].trim();
        });
      };
      reader.readAsText(file);
    });

    // Chatbot logic (enhanced)
    const openChatbot = document.getElementById('openChatbot');
    const chatbotWidget = document.getElementById('chatbotWidget');
    const closeChatbot = document.getElementById('closeChatbot');
    const chatbotBody = document.getElementById('chatbotBody');
    const chatbotInput = document.getElementById('chatbotInput');
    const chatbotSend = document.getElementById('chatbotSend');
    const chatbotQuickReplies = document.getElementById('chatbotQuickReplies');
    let chatbotHistory = [];
    let lastTopic = null;

    // Quick reply options
    const quickReplies = [
      { text: "What is Scope 1?", value: "What is Scope 1?" },
      { text: "How can I reduce emissions?", value: "How can I reduce emissions?" },
      { text: "Show my calculation history", value: "Show my calculation history" },
      { text: "What is my carbon footprint?", value: "What is my carbon footprint?" }
    ];

    function renderQuickReplies() {
      chatbotQuickReplies.innerHTML = '';
      quickReplies.forEach(q => {
        const btn = document.createElement('button');
        btn.textContent = q.text;
        btn.type = 'button';
        btn.style.cssText = "background:#e7f1db;color:#275213;border:none;border-radius:8px;padding:0.3em 0.8em;cursor:pointer;font-size:1em;";
        btn.addEventListener('click', () => {
          chatbotInput.value = q.value;
          handleChatSend();
        });
        chatbotQuickReplies.appendChild(btn);
      });
    }

    function chatbotGreeting() {
      const name = currentUser ? currentUser : "there";
      return `<div style="color:#6aa44d;font-weight:700;">Hi ${name}! Iâ€™m your EcoLeaf AI Assistant.<br>
        You can ask me about your carbon footprint, emission scopes, or how to reduce emissions.<br>
        <span style="color:#40682a;font-weight:400;">Try a quick question below!</span></div>`;
    }

    function chatbotReply(msg) {
      msg = msg.toLowerCase();
      lastTopic = null;
      if (msg.includes('scope 1')) { lastTopic = 'scope1'; return "Scope 1 covers direct emissions from owned or controlled sources (e.g., company vehicles, boilers)."; }
      if (msg.includes('scope 2')) { lastTopic = 'scope2'; return "Scope 2 covers indirect emissions from the generation of purchased electricity, steam, heating, and cooling consumed by your company."; }
      if (msg.includes('scope 3')) { lastTopic = 'scope3'; return "Scope 3 includes all other indirect emissions in a companyâ€™s value chain, such as business travel, procurement, waste, and transportation."; }
      if (msg.includes('reduce') || msg.includes('tips')) { lastTopic = 'reduce'; return "To reduce emissions: switch to renewable energy, optimize logistics, reduce waste, and engage suppliers for sustainability. Want more tips?"; }
      if (msg.includes('history')) { lastTopic = 'history'; return "Your calculation history is shown in the dashboard modal. Would you like to open it?"; }
      if (msg.includes('footprint')) { lastTopic = 'footprint'; return "Your carbon footprint is calculated based on your input data in the dashboard. Click 'Explore Dashboard' to view or update it."; }
      if (msg.includes('hello') || msg.includes('hi')) { return chatbotGreeting(); }
      return "I'm here to help! Try asking about emission scopes, reduction tips, or your carbon footprint.";
    }

    function addChatMsg(msg, from) {
      const div = document.createElement('div');
      div.style.margin = '0.5rem 0';
      div.style.textAlign = from === 'user' ? 'right' : 'left';
      div.innerHTML = `<span style="background:${from==='user'?'#c3da8f':'#f5fbe9'};padding:0.4em 0.9em;border-radius:10px;display:inline-block;">${msg}</span>`;
      chatbotBody.appendChild(div);
      chatbotBody.scrollTop = chatbotBody.scrollHeight;
      chatbotHistory.push({ msg, from });
    }

    function showTypingIndicator() {
      const typingDiv = document.createElement('div');
      typingDiv.id = 'chatbotTyping';
      typingDiv.style.margin = '0.5rem 0';
      typingDiv.style.textAlign = 'left';
      typingDiv.innerHTML = `<span style="background:#f5fbe9;padding:0.4em 0.9em;border-radius:10px;display:inline-block;">
        <span class="dotdotdot" style="display:inline-block;width:1.5em;">&#9679;&#9679;&#9679;</span> typing...
      </span>`;
      chatbotBody.appendChild(typingDiv);
      chatbotBody.scrollTop = chatbotBody.scrollHeight;
    }

    function removeTypingIndicator() {
      const typingDiv = document.getElementById('chatbotTyping');
      if (typingDiv) typingDiv.remove();
    }

    function handleChatSend() {
      const msg = chatbotInput.value.trim();
      if (!msg) return;
      addChatMsg(msg, 'user');
      chatbotInput.value = '';
      showTypingIndicator();
      setTimeout(() => {
        removeTypingIndicator();
        const reply = chatbotReply(msg);
        addChatMsg(reply, 'bot');
      }, 700);
    }

    // Restore chat history on open
    function restoreChatHistory() {
      chatbotBody.innerHTML = '';
      if (chatbotHistory.length === 0) {
        addChatMsg(chatbotGreeting(), 'bot');
      } else {
        chatbotHistory.forEach(entry => addChatMsg(entry.msg, entry.from));
      }
    }

    openChatbot.addEventListener('click', () => {
      chatbotWidget.style.display = 'flex';
      openChatbot.style.display = 'none';
      chatbotWidget.focus();
      restoreChatHistory();
      renderQuickReplies();
      setTimeout(() => chatbotInput.focus(), 100);
    });
    closeChatbot.addEventListener('click', () => {
      chatbotWidget.style.display = 'none';
      openChatbot.style.display = 'flex';
    });
    chatbotSend.addEventListener('click', handleChatSend);
    chatbotInput.addEventListener('keydown', e => { if (e.key === 'Enter') handleChatSend(); });

    // Navigation logic (ensure all sections are handled)
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = [
      document.querySelector('.container'), // Home section
      document.getElementById('section-dashboard'),
      document.getElementById('section-blog'),
      document.getElementById('section-contact'),
      document.getElementById('section-privacy')
    ];
    function showSectionByIndex(idx) {
      sections.forEach((sec, i) => {
        if (sec) sec.style.display = (i === idx) ? '' : 'none';
      });
    }
    // Map nav-link data-section to section index
    const sectionMap = {
      home: 0,
      dashboard: 1,
      blog: 2,
      contact: 3,
      privacy: 4
    };
    navLinks.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const idx = sectionMap[this.getAttribute('data-section')];
        showSectionByIndex(idx);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
    // Show home section by default
    showSectionByIndex(0);

    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    darkModeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark-mode');
      darkModeToggle.textContent = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
    });

    // Language support (demo)
    const langSelect = document.getElementById('langSelect');
    const translations = {
      fr: {
        "Explore Dashboard": "Explorer le tableau de bord",
        "Track Emissions": "Suivre les Ã©missions",
        "Our Commitment": "Notre engagement",
        "Leadership Team": "Ã‰quipe de direction",
        "Set Your Emission Reduction Goal": "DÃ©finir votre objectif de rÃ©duction des Ã©missions",
        "Annual Target (tonnes CO2e)": "Objectif annuel (tonnes CO2e)",
        "Your Carbon Footprint": "Votre empreinte carbone",
        "Calculation History": "Historique des calculs",
        "Direct Emissions from Company Operations": "Ã‰missions directes des opÃ©rations de l'entreprise",
        "Energy Indirect Emissions": "Ã‰missions indirectes d'Ã©nergie",
        "Other Indirect Emissions": "Autres Ã©missions indirectes"
      }
    };
    langSelect.addEventListener('change', () => {
      const lang = langSelect.value;
      document.querySelectorAll('button, h2, h3, label').forEach(el => {
        const t = translations[lang]?.[el.textContent.trim()];
        if (t) el.textContent = t;
      });
    });

    // Blog modal content
    const blogPosts = [
      {
        title: "How AI is Transforming Carbon Accounting",
        date: "April 2025",
        image: "https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=600&q=80",
        content: `<p>Artificial intelligence (AI) is rapidly changing the landscape of carbon accounting. By automating data collection, improving accuracy, and providing predictive insights, AI empowers organizations to make smarter sustainability decisions.</p>
        <ul>
          <li><strong>Automated Data Collection:</strong> AI can gather emissions data from multiple sources, reducing manual errors and saving time.</li>
          <li><strong>Real-Time Analytics:</strong> Machine learning models identify emission hotspots and forecast future trends, enabling proactive action.</li>
          <li><strong>Personalized Recommendations:</strong> AI-driven platforms suggest tailored strategies for emission reduction based on your business profile.</li>
        </ul>
        <p>Embracing AI in carbon accounting is a key step toward achieving net-zero goals and building a more sustainable future.</p>`
      },
      {
        title: "Top 5 Ways to Reduce Your Business Emissions",
        date: "March 2025",
        image: "https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=600&q=80",
        content: `<ol>
          <li><strong>Switch to Renewable Energy:</strong> Power your operations with solar, wind, or hydro energy.</li>
          <li><strong>Optimize Logistics:</strong> Streamline transportation and delivery routes to minimize fuel use.</li>
          <li><strong>Engage Suppliers:</strong> Work with partners who prioritize sustainability.</li>
          <li><strong>Reduce Waste:</strong> Implement recycling and circular economy practices.</li>
          <li><strong>Promote Remote Work:</strong> Reduce commuting emissions by supporting flexible work arrangements.</li>
        </ol>
        <p>Every step counts. Start with one action and build a culture of sustainability in your organization.</p>`
      },
      {
        title: "Understanding Scope 1, 2, and 3 Emissions",
        date: "February 2025",
        image: "https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?auto=format&fit=crop&w=600&q=80",
        content: `<p>Greenhouse gas emissions are categorized into three scopes:</p>
        <ul>
          <li><strong>Scope 1:</strong> Direct emissions from owned or controlled sources (e.g., company vehicles, boilers).</li>
          <li><strong>Scope 2:</strong> Indirect emissions from the generation of purchased electricity, steam, heating, and cooling.</li>
          <li><strong>Scope 3:</strong> All other indirect emissions in a companyâ€™s value chain, such as business travel, procurement, waste, and transportation.</li>
        </ul>
        <p>Understanding and addressing all three scopes is essential for comprehensive carbon management.</p>`
      }
    ];

    function showBlogModal(idx) {
      const post = blogPosts[idx];
      if (!post) return;
      document.getElementById('blogModalContent').innerHTML = `
        <img src="${post.image}" alt="${post.title}" style="width:100%;border-radius:12px;max-height:180px;object-fit:cover;margin-bottom:1em;">
        <h2 style="font-size:1.5rem;color:#275210;margin-bottom:0.2em;">${post.title}</h2>
        <div style="color:#627a3b;font-size:1em;margin-bottom:1em;">${post.date}</div>
        ${post.content}
      `;
      document.getElementById('blogModal').style.display = 'flex';
      document.getElementById('blogModal').setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
    }

    document.getElementById('closeBlogModal').onclick = function() {
      document.getElementById('blogModal').style.display = 'none';
      document.getElementById('blogModal').setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
    };

    // Close blog modal on overlay click or Escape
    document.getElementById('blogModal').addEventListener('click', function(e) {
      if (e.target === this) document.getElementById('closeBlogModal').click();
    });
    window.addEventListener('keydown', function(e) {
      if (e.key === "Escape" && document.getElementById('blogModal').style.display === 'flex') {
        document.getElementById('closeBlogModal').click();
      }
    });
  </script>

  <!-- Animated SVG leaves (demo) -->
  <div class="bg-leaves">
    <svg class="leaf leaf1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100%" height="100%">
      <path fill="#8eb145" d="M12 2C10.34 2 8.68 2.34 7.12 3C5.56 3.66 4.24 4.84 3.41 6.41C2.58 8 2.24 9.8 2.41 11.59C2.58 13.38 3.24 15.16 4.41 16.59C5.56 17.84 7.12 18.68 9 19C10.88 19.32 12.76 19.04 14.41 18.24C16.06 17.44 17.41 16.24 18.41 14.59C19.41 12.94 20 11 20 9C20 6.79 18.21 5 16 5C14.79 5 13.68 5.68 13.06 6.82C12.44 5.68 11.32 5 10 5C8.79 5 8 5.79 8 7C8 8.21 8.79 9 10 9C11.32 9 12.44 8.32 13.06 7.18C13.68 8.32 14.79 9 16 9C17.21 9 18 9.79 18 11C18 12.21 17.21 13 16 13C14.79 13 13.68 12.32 13.06 11.18C12.44 12.32 11.32 13 10 13C8.79 13 8 12.21 8 11C8 9.79 8.79 9 10 9C11.32 9 12.44 9.68 13.06 10.82C13.68 9.68 14.79 9 16 9C17.21 9 18 9.79 18 11C18 12.21 17.21 13 16 13Z" />
    </svg>
    <svg class="leaf leaf2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100%" height="100%">
      <path fill="#8eb145" d="M12 2C10.34 2 8.68 2.34 7.12 3C5.56 3.66 4.24 4.84 3.41 6.41C2.58 8 2.24 9.8 2.41 11.59C2.58 13.38 3.24 15.16 4.41 16.59C5.56 17.84 7.12 18.68 9 19C10.88 19.32 12.76 19.04 14.41 18.24C16.06 17.44 17.41 16.24 18.41 14.59C19.41 12.94 20 11 20 9C20 6.79 18.21 5 16 5C14.79 5 13.68 5.68 13.06 6.82C12.44 5.68 11.32 5 10 5C8.79 5 8 5.79 8 7C8 8.21 8.79 9 10 9C11.32 9 12.44 8.32 13.06 7.18C13.68 8.32 14.79 9 16 9C17.21 9 18 9.79 18 11C18 12.21 17.21 13 16 13C14.79 13 13.68 12.32 13.06 11.18C12.44 12.32 11.32 13 10 13C8.79 13 8 12.21 8 11C8 9.79 8.79 9 10 9C11.32 9 12.44 9.68 13.06 10.82C13.68 9.68 14.79 9 16 9C17.21 9 18 9.79 18 11C18 12.21 17.21 13 16 13Z" />
    </svg>
  </div>
</body>

</html>
